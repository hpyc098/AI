<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>自动成长 AI</title>
<style>
body { font-family: Arial; max-width: 600px; margin: 30px auto; }
h2 { text-align: center; }
#chatBox { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: auto; margin-bottom: 10px; }
.user { color: blue; margin: 5px 0; }
.ai { color: green; margin: 5px 0; }
input { width: 80%; padding: 5px; }
button { padding: 5px 10px; }
</style>
</head>
<body>
<h2>自动成长 AI 聊天</h2>
<div id="chatBox"></div>
<input type="text" id="userInput" placeholder="输入问题..." />
<button onclick="sendMessage()">发送</button>

<script>
const chatBox = document.getElementById("chatBox");
const input = document.getElementById("userInput");

function appendMessage(sender, text) {
  const div = document.createElement("div");
  div.className = sender;
  div.textContent = text;
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function sendMessage() {
  const message = input.value.trim();
  if (!message) return;
  appendMessage("user", "你: " + message);
  input.value = "";

  fetch("/api/chat", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ message: message })
  })
  .then(response => response.json())
  .then(data => {
    appendMessage("ai", "AI: " + data.reply);
  })
  .catch(err => {
    appendMessage("ai", "❌ 出错了: " + err);
  });
}

input.addEventListener("keydown", function(e) {
  if (e.key === "Enter") sendMessage();
});
</script>
</body>
</html>
